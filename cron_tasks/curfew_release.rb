# cron_tasks/curfew_release.rb

require_relative '../professor_control'
require_relative '../push_notifier'

CURFEW_RELEASE_MESSAGES = [
  "좋은 아침입니다. 통금이 해제되었습니다. 새로운 하루를 시작해 볼까요?",
  "하늘이 밝아졌습니다. 기숙사 문이 열렸어요. 오늘도 힘차게!",
  "통금이 끝났습니다. 아침 공기를 마시며 몸을 깨워보세요.",
  "이제 자유롭게 움직일 수 있어요. 기숙사 밖에서도 조심하세요.",
  "하루의 시작은 마음가짐부터입니다. 통금이 해제되었어요.",
  "교수님들은 벌써 하루를 시작했답니다. 여러분도 준비되셨나요?",
  "햇살이 여러분을 부르고 있어요. 통금은 끝났답니다.",
  "오늘은 어떤 마법을 펼치게 될까요? 통금 해제, 시작하세요!",
  "이제 기숙사 밖으로 나가 활동해도 괜찮아요. 좋은 하루 보내세요.",
  "아침이 밝았습니다. 통금이 해제되었음을 알립니다.",
  "잘 주무셨나요? 오늘도 여러분을 위한 수업이 기다리고 있습니다.",
  "조용한 새벽이 지나고, 마법 학교에 하루가 시작되었어요.",
  "기숙사의 문이 모두 열렸습니다. 천천히 하루를 시작해 보세요.",
  "기분 좋은 아침 공기가 기숙사 안으로 스며들고 있어요.",
  "오늘도 새로운 배움이 여러분을 기다리고 있습니다.",
  "아침 식사는 꼭 챙기세요. 집중력에 도움이 된답니다.",
  "지금 이 순간이 오늘 하루를 결정지을 수도 있답니다.",
  "모두가 잠에서 깰 시간이에요. 밖에서 산책하며 생각을 정리해보세요.",
  "기숙사 안의 마법 등불이 꺼졌습니다. 해가 올랐군요.",
  "학교는 이미 깨어났습니다. 여러분의 하루도 빛나길 바랍니다."
]

def run_curfew_release(sheet_manager, mastodon_client)
  unless auto_push_enabled?(sheet_manager, "통금 해제 알람")
    puts "[스킵] 통금 해제 알람 기능이 OFF 상태입니다."
    return
  end

  message = CURFEW_RELEASE_MESSAGES.sample
  PushNotifier.broadcast(mastodon_client, message)
end

