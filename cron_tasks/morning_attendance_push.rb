# ============================================
# cron_tasks/morning_attendance_push.rb
# ============================================
require_relative '../professor_control'
require_relative '../utils/weather_message'

MORNING_ATTENDANCE_MESSAGES = [
  "좋은 아침이에요. 오늘도 출석으로 하루를 시작해보아요.",
  "일찍 일어났군요. 출석부터 하고 아침 먹어요.",
  "아침 해가 참 밝네요. 출석하고 좋은 하루 보내요.",
  "오늘도 건강하게 일어났군요. 출석 먼저 해요.",
  "교수가 출석부를 펼쳤어요. 이름 남기고 가요.",
  "아침 공기가 상쾌하군요. 출석하고 깊게 숨 쉬어봐요.",
  "일찍 일어나니 기분이 좋지요? 출석도 챙기고요.",
  "새로운 하루예요. 출석으로 좋은 시작 해봐요.",
  "잠은 잘 잤나요? 출석하고 아침 먹어요.",
  "오늘은 어떤 일들이 기다리고 있을까요? 출석부터 해요.",
  "교수가 기다리고 있었어요. 출석하러 오세요.",
  "아침은 먹었나요? 출석도 잊지 말고요.",
  "오늘도 학생들이 건강하길 바라요. 출석 먼저 하세요.",
  "날씨가 참 좋군요. 출석하고 산책이라도 하세요.",
  "교수 출석부에 이름 하나씩 적히는 게 참 기쁘네요.",
  "아침 일찍 일어나니 기특하군요. 출석하세요.",
  "오늘 하루도 건강하게 보내요. 출석부터 시작이에요.",
  "기숙사에서 잘 잤나요? 출석하고 수업 가요.",
  "교수도 아침 일찍 일어났어요. 같이 출석해봐요.",
  "오늘도 무사히 아침을 맞았군요. 출석으로 감사해요.",
  "아침 식사 전에 출석 먼저 하는 게 좋아요.",
  "교수가 창문을 열어놨어요. 출석하러 오세요.",
  "오늘도 학생들 얼굴 보니 교수가 행복하네요.",
  "출석은 하루의 첫 인사예요. 잊지 마세요.",
  "일찍 일어난 새가 먹이를 잡아요. 출석하세요.",
  "오늘도 즐거운 하루 되길 바라요. 출석부터 해봐요.",
  "교수 차 한 잔 준비했어요. 출석하고 마셔요.",
  "아침 햇살이 따뜻하군요. 출석하고 햇볕 쬐세요.",
  "건강이 제일이에요. 출석하고 아침 꼭 먹어요.",
  "오늘도 학생들 덕분에 교수가 즐겁네요. 출석하세요."
]

def run_morning_attendance_push(sheet_manager, mastodon_client)
  unless auto_push_enabled?(sheet_manager, "아침출석자동툿")
    puts "[스킵] 아침 출석 자동툿이 OFF 상태입니다."
    return
  end

  # 겨울 날씨 메시지 가져오기
  weather_info = random_weather_message_with_style
  attendance_msg = MORNING_ATTENDANCE_MESSAGES.sample
  
  # 날씨 + 출석 메시지 조합
  final_message = "#{weather_info[:text]}\n\n#{attendance_msg}"

  puts "[DEBUG] 전송할 메시지: #{final_message}"
  mastodon_client.broadcast(final_message)
end

# ============================================
# cron_tasks/curfew_alert.rb (출석 마감 메시지 삭제, 통금만 남김)
# ============================================
require_relative '../professor_control'

CURFEW_MESSAGES = [
  "이제 통금 시간이에요. 기숙사로 돌아가서 푹 쉬세요.",
  "늦은 시간이군요. 방으로 들어가서 따뜻하게 있어요.",
  "밤은 쉬는 시간이에요. 기숙사에서 편히 있으세요.",
  "오늘도 고생 많았어요. 이제 쉴 시간이에요.",
  "통금 시간이에요. 안전하게 방에 있으세요.",
  "교수도 이제 잘 시간이에요. 학생들도 쉬세요.",
  "밤이 깊었군요. 기숙사 밖은 나가지 마세요.",
  "내일을 위해 오늘은 푹 쉬어야 해요.",
  "늦은 밤엔 몸도 마음도 쉬어야지요. 방에 있어요.",
  "통금 시간이에요. 복도도 조용히 해주세요.",
  "교수가 불을 끌 시간이에요. 학생들도 자요.",
  "오늘 하루 정말 수고했어요. 이제 쉬어도 돼요.",
  "밤엔 다들 기숙사에 있어야 안심이에요.",
  "통금 시간 지키는 게 교수와의 약속이에요.",
  "늦게까지 공부했군요. 이제 자요.",
  "기숙사가 제일 안전한 곳이에요. 방에 있어요.",
  "밤 공기는 차가우니 밖에 나가지 마세요.",
  "오늘 배운 것 생각하며 쉬는 것도 공부예요.",
  "교수가 학생들 안전을 지켜야 하니까 통금이에요.",
  "늦은 밤엔 조용히 해야 해요. 방에 있으세요.",
  "통금 시간이에요. 내일 아침 건강하게 봐요.",
  "밤이 깊으니 이불 속에서 따뜻하게 있어요.",
  "오늘도 무사히 보냈으니 감사하며 쉬세요.",
  "교수도 학생들도 모두 쉴 시간이에요.",
  "통금 시간엔 복도 다니지 말고 방에만 있어요.",
  "내일 아침 맑은 얼굴로 보려면 지금 자야 해요.",
  "늦은 시간까지 깨어있으면 내일 피곤해요.",
  "기숙사 문 닫을 시간이에요. 안전하게 있으세요.",
  "오늘 하루도 교수 덕분에 기쁘네요. 푹 쉬세요.",
  "통금 시간이에요. 조용히 쉬다가 내일 봐요."
]

def run_curfew_alert(sheet_manager, mastodon_client)
  unless auto_push_enabled?(sheet_manager, "통금알람")
    puts "[스킵] 통금알람이 OFF 상태입니다."
    return
  end

  message = CURFEW_MESSAGES.sample
  mastodon_client.broadcast(message)
end

# ============================================
# cron_tasks/curfew_release.rb
# ============================================
require_relative '../professor_control'
require_relative '../utils/weather_message'

CURFEW_RELEASE_MESSAGES = [
  "좋은 아침이에요. 통금이 풀렸으니 자유롭게 다녀요.",
  "아침이 밝았군요. 이제 어디든 갈 수 있어요.",
  "통금 시간이 끝났어요. 상쾌한 아침 공기 마셔요.",
  "새벽이 지나고 아침이 왔군요. 활기차게 시작해요.",
  "잘 잤나요? 통금 풀렸으니 마음껏 돌아다녀요.",
  "기숙사 문이 열렸어요. 오늘도 좋은 하루 보내요.",
  "통금이 해제되었어요. 아침 산책 어때요?",
  "아침 햇살이 예쁘군요. 통금 풀렸으니 나가봐요.",
  "밤새 푹 잤길 바라요. 이제 자유롭게 다녀요.",
  "통금 시간이 끝났어요. 건강한 하루 보내요.",
  "좋은 아침이에요. 오늘도 즐거운 하루 되세요.",
  "아침이 되니 교수도 기분이 좋군요. 잘 다녀오세요.",
  "통금 풀렸어요. 아침 먹고 수업 가요.",
  "새 아침이에요. 어디든 갈 수 있으니 조심해서 다녀요.",
  "밤이 지나고 낮이 왔군요. 활기차게 보내요.",
  "통금 해제예요. 오늘도 건강하게 지내요.",
  "아침 공기가 맑군요. 깊게 숨 쉬고 다녀요.",
  "잘 잤나요? 통금 끝났으니 자유롭게 활동해요.",
  "기숙사 밖 세상이 기다리고 있어요. 다녀오세요.",
  "통금 시간 끝났어요. 오늘 하루 재미있게 보내요.",
  "아침 해가 밝았군요. 마음껏 돌아다녀요.",
  "새벽이 지나고 아침이에요. 통금 풀렸으니 나가요.",
  "기숙사 복도에 발소리 들려도 괜찮은 시간이에요.",
  "통금이 끝났군요. 조심해서 다녀오세요.",
  "아침이 되니 세상이 밝군요. 자유롭게 다녀요.",
  "통금 해제예요. 오늘도 무사히 보내요.",
  "밤의 규칙이 끝났어요. 마음껏 활동하세요.",
  "창밖에 아침빛이 들어오는군요. 통금 풀렸어요.",
  "밤새 안전하게 지켜줘서 교수도 기쁘네요. 잘 다녀오세요.",
  "아침 해가 떴군요. 통금 끝났으니 즐거운 하루 보내요."
]

def run_curfew_release(sheet_manager, mastodon_client)
  unless auto_push_enabled?(sheet_manager, "통금해제알람")
    puts "[스킵] 통금 해제 알람이 OFF 상태입니다."
    return
  end

  # 겨울 날씨 메시지 추가
  weather_info = random_weather_message_with_style
  release_msg = CURFEW_RELEASE_MESSAGES.sample
  
  # 날씨 + 통금 해제 메시지 조합
  final_message = "#{weather_info[:text]}\n\n#{release_msg}"

  puts "[DEBUG] 전송할 메시지: #{final_message}"
  mastodon_client.broadcast(final_message)
endn\n#{release_msg}"

  puts "[DEBUG] 전송할 메시지: #{final_message}"
  mastodon_client.broadcast(final_message)
end
